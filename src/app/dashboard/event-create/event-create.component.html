<app-sidebar></app-sidebar>
<div class="main-container">
  <h1>Create your event</h1>
  <div class="form-container">
    <form #eventCreateForm="ngForm" (submit)="saveEvent(template)">

      <div class="form-group">
        <label for="name">Event name *</label>
        <input type="text" class="form-control" id="name" name="name" [(ngModel)]="event.name" #name="ngModel" required>
        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">
          <div *ngIf="name.errors.required">
            Name is required.
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="description">Event description *</label>
        <textarea type="text" class="form-control" id="description" name="description" [(ngModel)]="event.description" #description="ngModel"
          required></textarea>
        <div *ngIf="description.invalid && (description.dirty || description.touched)" class="alert alert-danger">
          <div *ngIf="description.errors.required">
            Description is required.
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Enter address</label>
        <input type="text" class="form-control" (keyup)="updateSearch()" [(ngModel)]="autocomplete.query" [ngModelOptions]="{standalone: true}" [placeholder]="' '"
        />
        <ul class="list-group addresses-list" *ngIf="showAddressList">
          <li class="list-group-item" *ngFor="let item of autocompleteItems" (click)="chooseItem(item)">
            {{item.description}}
          </li>
        </ul>
      </div>

      <div #mapGoogle id="map"></div>

      <div class="form-group">
        <label for="date">Event date *</label>
        <input type="date" class="form-control" id="date" name="date" [(ngModel)]="event.date" #date="ngModel" required>
        <div *ngIf="date.invalid && (date.dirty || date.touched)" class="alert alert-danger">
          <div *ngIf="date.errors.required">
            Date is required.
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="time">Event time *</label>
        <input type="time" class="form-control" id="time" name="time" [(ngModel)]="event.time" #time="ngModel" required>
        <div *ngIf="time.invalid && (time.dirty || time.touched)" class="alert alert-danger">
          <div *ngIf="time.errors.required">
            Time is required.
          </div>
        </div>
      </div>

      <button type="submit">Create</button>

    </form>
  </div>
  <div class="bottom-container">
    <a href="/dashboard/events">Return to events</a>
  </div>
</div>

<ng-template #template>
    <div class="modal-header">
      <h4 class="modal-title pull-left">Your event has been created !</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>Go back to your events page.</p>
  
      <button (click)="goEvents()" class="back">Back to Events</button>
    </div>
  </ng-template>